<style>
    .glassmorphism {
        background: rgba(255, 255, 255, 0.25);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.18);
    }

    .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .profile-shadow {
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .order-card {
        transition: all 0.3s ease;
    }

    .order-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
</style>
</head>

<body class="bg-gray-50 min-h-screen">
    <%- include("../../views/partials/user/header") %>
        <div class=" py-9">
            <div class="container mx-auto px-4">
                <div class="text-center text-gray-700">
                    <h1 class="text-4xl font-bold mb-2">My Profile</h1>
                    <p class="text-xl opacity-90">Manage your account and view your orders</p>
                </div>
            </div>
        </div>


        <!-- Main Content -->


        <style>
            .profile-shadow {
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            }

            .order-card {
                transition: transform 0.3s ease;
            }

            .order-card:hover {
                transform: translateY(-5px);
            }
        </style>

        <body class="bg-gray-50 min-h-screen">
            <div class="container mx-auto px-4 mt-10 pb-12">
                <!-- Profile Overview Section -->
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 mb-12">
                    <!-- Profile Card -->
                    <div class="lg:col-span-1">
                        <div class="bg-white rounded-2xl shadow-xl p-8 text-center profile-shadow">
                            <div class="relative inline-block mb-6">
                                <img src="/uploads/re-image/<%=user.profileImage%>" alt="Profile Image"
                                    class="w-32 h-32 rounded-full mx-auto object-cover border-4 border-white shadow-lg">
                                <div
                                    class="absolute bottom-2 right-2 w-6 h-6 bg-green-500 rounded-full border-2 border-white">
                                </div>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">
                                <%= user.firstName %>
                                    <%= user.lastName %>
                            </h2>
                            <p class="text-gray-600 mb-1">
                                <%= user.email %>
                            </p>
                            <p class="text-sm text-gray-500 mb-6">Member since 2023</p>

                            <div class="space-y-3">
                                <a href="/editProfile"
                                    class="block w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-blue-700 hover:to-purple-700 transition duration-300 font-medium text-center">
                                    <i class="fas fa-edit mr-2"></i>Edit Profile
                                </a>
                                <a href="/forgot-password"
                                    class="block w-full border-2 border-gray-300 text-gray-700 px-6 py-3 rounded-xl hover:border-gray-400 hover:bg-gray-50 transition duration-300 font-medium">
                                    <i class="fas fa-question-circle mr-2 text-gray-600"></i>Forgot Password?
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Stats Cards -->
                    <div class="lg:col-span-3">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                                <div
                                    class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-shopping-bag text-blue-600 text-xl"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800">12</h3>
                                <p class="text-gray-600">Total Orders</p>
                            </div>
                            <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                                <div
                                    class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-dollar-sign text-green-600 text-xl"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800">$1,234</h3>
                                <p class="text-gray-600">Total Spent</p>
                            </div>
                            <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                                <div
                                    class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-star text-purple-600 text-xl"></i>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-800">Gold</h3>
                                <p class="text-gray-600">Member Status</p>
                            </div>
                        </div>

                        <!-- Address Card -->
                        <div class="bg-white rounded-xl shadow-lg p-8">
                            <div class="flex justify-between items-center mb-6">
                                <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                                    <i class="fas fa-map-marker-alt text-red-500 mr-3"></i>
                                    Shipping Address
                                </h3>
                                <a href="/add-address"
                                    class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition duration-300 font-medium">
                                    <i class="fas fa-edit mr-2"></i>Manage
                                </a>
                            </div>

                            <% if (userAddress && userAddress.address && userAddress.address.length> 0) {
                                const defaultAddr = userAddress.address.find(addr => addr.isDefault);
                                if (defaultAddr) { %>

                                <div class="bg-gray-50 rounded-lg p-6">
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <div>
                                            <p class="text-gray-700 font-medium">
                                                <%= defaultAddr.street %>
                                            </p>
                                            <p class="text-gray-600">
                                                <%= defaultAddr.city %>, <%= defaultAddr.pin %>
                                            </p>
                                            <p class="text-gray-600">
                                                <%= defaultAddr.country %>
                                            </p>
                                        </div>
                                        <div class="text-right md:text-left">
                                            <span
                                                class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                                                <i class="fas fa-check-circle mr-1"></i>
                                                Verified(Default)
                                            </span>
                                        </div>
                                    </div>
                                </div>

                                <% } else { %>
                                    <p class="text-gray-500">No default address found.</p>
                                    <% } } else { %>
                                        <p class="text-gray-500">No address found.</p>
                                        <% } %>

                        </div>
                    </div>
                </div>

                <!-- Orders Section -->
                <div class="bg-white rounded-xl shadow-lg p-8">
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-2xl font-bold text-gray-800 flex items-center">
                            <i class="fas fa-box text-orange-500 mr-3"></i>
                            Recent Orders
                        </h3>
                        <button class="text-blue-600 hover:text-blue-800 font-medium">
                            View All Orders <i class="fas fa-arrow-right ml-1"></i>
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        <!-- Order Card 1 -->
                        <div
                            class="order-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="font-bold text-gray-800 text-lg">#ORD-001</h4>
                                    <p class="text-gray-600 text-sm">Dec 15, 2023</p>
                                </div>
                                <span
                                    class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                                    <i class="fas fa-check-circle mr-1"></i>
                                    Delivered
                                </span>
                            </div>
                            <div class="mb-4">
                                <p class="text-2xl font-bold text-gray-800">$89.99</p>
                                <p class="text-gray-600 text-sm">3 items</p>
                            </div>
                            <div class="flex space-x-2">
                                <button
                                    class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300 text-sm font-medium">
                                    <i class="fas fa-eye mr-1"></i>View Details
                                </button>
                                <button
                                    class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition duration-300 text-sm">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Order Card 2 -->
                        <div
                            class="order-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="font-bold text-gray-800 text-lg">#ORD-002</h4>
                                    <p class="text-gray-600 text-sm">Dec 12, 2023</p>
                                </div>
                                <span
                                    class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                                    <i class="fas fa-truck mr-1"></i>
                                    Shipped
                                </span>
                            </div>
                            <div class="mb-4">
                                <p class="text-2xl font-bold text-gray-800">$156.50</p>
                                <p class="text-gray-600 text-sm">2 items</p>
                            </div>
                            <div class="flex space-x-2">
                                <button
                                    class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300 text-sm font-medium">
                                    <i class="fas fa-eye mr-1"></i>Track Order
                                </button>
                                <button onclick="cancelOrder('ORD-002')"
                                    class="px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition duration-300 text-sm">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Order Card 3 -->
                        <div
                            class="order-card bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h4 class="font-bold text-gray-800 text-lg">#ORD-003</h4>
                                    <p class="text-gray-600 text-sm">Dec 10, 2023</p>
                                </div>
                                <span
                                    class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                                    <i class="fas fa-clock mr-1"></i>
                                    Processing
                                </span>
                            </div>
                            <div class="mb-4">
                                <p class="text-2xl font-bold text-gray-800">$45.00</p>
                                <p class="text-gray-600 text-sm">1 item</p>
                            </div>
                            <div class="flex space-x-2">
                                <button
                                    class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition duration-300 text-sm font-medium">
                                    <i class="fas fa-eye mr-1"></i>View Details
                                </button>
                                <button onclick="cancelOrder('ORD-003')"
                                    class="px-4 py-2 border border-red-300 text-red-600 rounded-lg hover:bg-red-50 transition duration-300 text-sm">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Empty State (hidden by default) -->
                    <div class="hidden text-center py-12">
                        <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <i class="fas fa-shopping-bag text-gray-400 text-3xl"></i>
                        </div>
                        <h4 class="text-xl font-semibold text-gray-800 mb-2">No orders yet</h4>
                        <p class="text-gray-600 mb-6">Start shopping to see your orders here</p>
                        <button
                            class="bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition duration-300 font-medium">
                            Start Shopping
                        </button>
                    </div>
                </div>
            </div>

            <%- include("../../views/partials/user/footer") %>

                <script>
                    function forgotPassword() {
                        Swal.fire({
                            title: 'Change Password',
                            input: 'email',
                            inputLabel: 'Enter your email address',
                            inputPlaceholder: 'you@example.com',
                            showCancelButton: true,
                            confirmButtonText: 'Send Reset Link',
                            confirmButtonColor: '#3B82F6',
                            cancelButtonColor: '#6B7280',
                            preConfirm: (email) => {
                                if (!email.trim()) {
                                    Swal.showValidationMessage('Email is required');
                                }
                                return email.trim();
                            }
                        }).then((result) => {
                            if (result.isConfirmed) {
                                Swal.fire({
                                    title: 'Success!',
                                    text: 'Password reset link sent to your email!',
                                    icon: 'success',
                                    confirmButtonColor: '#3B82F6'
                                });
                            }
                        });
                    }

                    function cancelOrder(orderId) {
                        Swal.fire({
                            title: 'Cancel Order?',
                            text: 'Are you sure you want to cancel this order?',
                            icon: 'warning',
                            showCancelButton: true,
                            confirmButtonText: 'Yes, cancel it!',
                            cancelButtonText: 'Keep order',
                            confirmButtonColor: '#EF4444',
                            cancelButtonColor: '#6B7280'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                Swal.fire({
                                    title: 'Cancelled!',
                                    text: 'Your order has been cancelled successfully.',
                                    icon: 'success',
                                    confirmButtonColor: '#3B82F6'
                                }).then(() => {
                                    location.reload();
                                });
                            }
                        });
                    }
                </script>
        </body>

        </html>